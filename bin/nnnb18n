#! /usr/bin/env node

const { program } = require('commander');
const pkg = require('../package.json');
const config = require('./config');
const createServer = require('../src/localeServer');
program.name('locales').version(pkg.version).description('启动本地翻译服务');
const usageList = [];
Object.entries(config).forEach(
  ([key, { option, description, default: def, usage }]) => {
    program.option(option, description, def);
    usageList.push(usage);
  }
);
program.on('--help', function () {
  console.log('\r\nExamples');
  usageList.forEach((usage) => console.log('  ' + usage));
});
program.parse(process.argv);
const langConfig = program.opts(); // 启动服务所需要的信息
createServer(langConfig);
